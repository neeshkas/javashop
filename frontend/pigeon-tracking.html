<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–∫–∏–Ω–≥ –ì–æ–ª—É–±—è - –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ú–∞–≥–∞–∑–∏–Ω "–ö–ò–ù–û"</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="https://maps.api.2gis.ru/2.0/loader.js"></script>
    <style>
      #map {
        width: 100%;
        height: 600px;
        border: 3px solid var(--street-yellow);
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
      }

      .pigeon-info {
        background: var(--black);
        border: 2px solid var(--street-yellow);
        padding: 30px;
        margin: 30px 0;
      }

      .pigeon-status {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 20px;
        margin-top: 20px;
      }

      .status-item {
        flex: 1;
        min-width: 200px;
        padding: 15px;
        background: var(--charcoal);
        border-left: 4px solid var(--street-yellow);
      }

      .status-item h4 {
        color: var(--street-yellow);
        font-size: 0.9rem;
        margin-bottom: 5px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .status-item p {
        font-size: 1.3rem;
        color: var(--white);
        margin: 0;
      }

      .pigeon-animation {
        text-align: center;
        font-size: 4rem;
        animation: fly 3s ease-in-out infinite;
      }

      @keyframes fly {
        0%, 100% { transform: translateY(0) rotate(-5deg); }
        50% { transform: translateY(-20px) rotate(5deg); }
      }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="container">
            <h1>üé∏ –ú–£–ó–´–ö–ê–õ–¨–ù–´–ô –ú–ê–ì–ê–ó–ò–ù "–ö–ò–ù–û" üé∏</h1>
            <nav class="site-nav">
                <a href="index.html">–ö–ê–¢–ê–õ–û–ì</a>
                <a href="cart.html">–ö–û–†–ó–ò–ù–ê</a>
                <a href="demo.html">–î–ï–ú–û</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" style="margin-top: 60px; margin-bottom: 60px;">
        <h2 style="text-align: center; margin-bottom: 40px;">üïäÔ∏è –¢–†–ï–ö–ò–ù–ì –ì–û–õ–£–ë–Ø –í –†–ï–ê–õ–¨–ù–û–ú –í–†–ï–ú–ï–ù–ò</h2>

        <!-- Pigeon Animation -->
        <div class="pigeon-animation">
          üïäÔ∏è
        </div>

        <!-- Pigeon Info -->
        <div class="pigeon-info">
            <h3 style="color: var(--street-yellow); margin-bottom: 20px;">–ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –î–û–°–¢–ê–í–ö–ï</h3>
            <div class="divider"></div>

            <div class="pigeon-status">
                <div class="status-item">
                    <h4>–ó–∞–∫–∞–∑ ‚Ññ</h4>
                    <p id="order-id">KINO-2025-001</p>
                </div>

                <div class="status-item">
                    <h4>–ò–º—è –≥–æ–ª—É–±—è</h4>
                    <p id="pigeon-name">–í–∏–∫—Ç–æ—Ä</p>
                </div>

                <div class="status-item">
                    <h4>–°—Ç–∞—Ç—É—Å</h4>
                    <p id="delivery-status" style="color: var(--street-yellow);">–í –ü–û–õ–Å–¢–ï</p>
                </div>

                <div class="status-item">
                    <h4>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ</h4>
                    <p id="distance">~2.3 –∫–º</p>
                </div>

                <div class="status-item">
                    <h4>–í—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è</h4>
                    <p id="eta">~15 –º–∏–Ω—É—Ç</p>
                </div>

                <div class="status-item">
                    <h4>–°–∫–æ—Ä–æ—Å—Ç—å</h4>
                    <p id="speed">45 –∫–º/—á</p>
                </div>
            </div>
        </div>

        <div class="divider"></div>

        <!-- Map -->
        <h3 class="mt-4 mb-3" style="color: var(--white);">–ö–ê–†–¢–ê –ú–ê–†–®–†–£–¢–ê (–ê–ª–º–∞—Ç—ã)</h3>
        <div id="map"></div>

        <p class="mt-3" style="color: var(--light-grey); text-align: center;">
          üê¶ –ì–æ–ª—É–±—å –æ—Å–Ω–∞—â—ë–Ω GPS-—Ç—Ä–µ–∫–µ—Ä–æ–º –∏ –ª–µ—Ç–∏—Ç –Ω–∞–ø—Ä—è–º—É—é –ø–æ –∫—Ä–∞—Ç—á–∞–π—à–µ–º—É –º–∞—Ä—à—Ä—É—Ç—É
        </p>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <p class="graffiti" style="font-size: 1.5rem; margin-bottom: 15px;">–¶–û–ô –ñ–ò–í</p>
            <p>&copy; 2025 –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ú–∞–≥–∞–∑–∏–Ω "–ö–ò–ù–û". –í –ø–∞–º—è—Ç—å –æ –í–∏–∫—Ç–æ—Ä–µ –¶–æ–µ –∏ –≥—Ä—É–ø–ø–µ "–ö–∏–Ω–æ".</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
      // –°–∏–º—É–ª—è—Ü–∏—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –≥–æ–ª—É–±—è —Å 2GIS –∫–∞—Ä—Ç–æ–π –ê–ª–º–∞—Ç—ã

      let map = null;
      let pigeonMarker = null;
      let pigeonPosition = { lat: 43.2220, lng: 76.8512 };  // –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è (—Ü–µ–Ω—Ç—Ä –ê–ª–º–∞—Ç—ã)
      const destination = { lat: 43.2567, lng: 76.9286 };  // –ü—É–Ω–∫—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

      const pigeonNames = ['–í–∏–∫—Ç–æ—Ä', '–Æ—Ä–∏–π', '–ò–≥–æ—Ä—å', '–ì–µ–æ—Ä–≥–∏–π', '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä'];
      const randomName = pigeonNames[Math.floor(Math.random() * pigeonNames.length)];
      document.getElementById('pigeon-name').textContent = randomName;

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 2GIS –∫–∞—Ä—Ç—ã
      DG.then(function() {
        map = DG.map('map', {
          center: [43.238949, 76.889709],  // –¶–µ–Ω—Ç—Ä –ê–ª–º–∞—Ç—ã
          zoom: 12
        });

        // –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä –≥–æ–ª—É–±—è
        pigeonMarker = DG.marker([pigeonPosition.lat, pigeonPosition.lng], {
          icon: DG.icon({
            iconUrl: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIj48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1zaXplPSIzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPvCflqDvuI88L3RleHQ+PC9zdmc+',
            iconSize: [40, 40],
            iconAnchor: [20, 20]
          })
        }).addTo(map);

        // –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä –ø—É–Ω–∫—Ç–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
        DG.marker([destination.lat, destination.lng], {
          icon: DG.icon({
            iconUrl: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIj48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1zaXplPSIzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPvCfj6M8L3RleHQ+PC9zdmc+',
            iconSize: [40, 40],
            iconAnchor: [20, 20]
          })
        }).addTo(map);

        // –õ–∏–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞
        DG.polyline([
          [pigeonPosition.lat, pigeonPosition.lng],
          [destination.lat, destination.lng]
        ], {
          color: '#FFD700',
          weight: 3,
          opacity: 0.7,
          dashArray: '10, 10'
        }).addTo(map);

        // –°–∏–º—É–ª—è—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –≥–æ–ª—É–±—è
        animatePigeon();
      });

      // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–ª—ë—Ç–∞ –≥–æ–ª—É–±—è
      function animatePigeon() {
        const speed = 0.0005;  // –°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
        const interval = setInterval(() => {
          // –î–≤–∏–∂–µ–Ω–∏–µ –∫ –ø—É–Ω–∫—Ç—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
          const latDiff = destination.lat - pigeonPosition.lat;
          const lngDiff = destination.lng - pigeonPosition.lng;

          if (Math.abs(latDiff) < 0.001 && Math.abs(lngDiff) < 0.001) {
            // –ì–æ–ª—É–±—å –ø—Ä–∏–±—ã–ª!
            clearInterval(interval);
            document.getElementById('delivery-status').textContent = '–î–û–°–¢–ê–í–õ–ï–ù–û';
            document.getElementById('delivery-status').style.color = '#00FF00';
            document.getElementById('distance').textContent = '0 –∫–º';
            document.getElementById('eta').textContent = '–ü—Ä–∏–±—ã–ª!';
            document.getElementById('speed').textContent = '0 –∫–º/—á';
            alert('üïäÔ∏è –ì–æ–ª—É–±—å ' + randomName + ' –¥–æ—Å—Ç–∞–≤–∏–ª –≤–∞—à –∑–∞–∫–∞–∑!\n\n–¶–æ–π –∂–∏–≤! ‚ù§Ô∏è');
            return;
          }

          pigeonPosition.lat += latDiff * speed;
          pigeonPosition.lng += lngDiff * speed;

          // –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä
          if (pigeonMarker && map) {
            pigeonMarker.setLatLng([pigeonPosition.lat, pigeonPosition.lng]);

            // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            const distance = calculateDistance(pigeonPosition, destination);
            document.getElementById('distance').textContent = '~' + distance.toFixed(1) + ' –∫–º';

            const eta = Math.ceil((distance / 45) * 60);  // –°–∫–æ—Ä–æ—Å—Ç—å 45 –∫–º/—á
            document.getElementById('eta').textContent = '~' + eta + ' –º–∏–Ω—É—Ç';
          }
        }, 100);
      }

      // –†–∞—Å—á—ë—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏
      function calculateDistance(point1, point2) {
        const R = 6371;  // –†–∞–¥–∏—É—Å –ó–µ–º–ª–∏ –≤ –∫–º
        const dLat = (point2.lat - point1.lat) * Math.PI / 180;
        const dLng = (point2.lng - point1.lng) * Math.PI / 180;
        const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                  Math.cos(point1.lat * Math.PI / 180) * Math.cos(point2.lat * Math.PI / 180) *
                  Math.sin(dLng / 2) * Math.sin(dLng / 2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        return R * c;
      }

      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ ID –∑–∞–∫–∞–∑–∞
      const orderId = 'KINO-2025-' + Math.floor(Math.random() * 1000).toString().padStart(3, '0');
      document.getElementById('order-id').textContent = orderId;
    </script>
</body>
</html>
