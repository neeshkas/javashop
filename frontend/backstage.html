<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω - –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ú–∞–≥–∞–∑–∏–Ω "–ö–ò–ù–û"</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="container">
            <h1>üé∏ –ú–£–ó–´–ö–ê–õ–¨–ù–´–ô –ú–ê–ì–ê–ó–ò–ù "–ö–ò–ù–û" üé∏</h1>
            <nav class="site-nav">
                <a href="index.html">–ö–ê–¢–ê–õ–û–ì</a>
                <a href="cart.html">–ö–û–†–ó–ò–ù–ê</a>
                <a href="admin.html" class="active">–ê–î–ú–ò–ù</a>
                <a href="demo.html">–î–ï–ú–û</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" style="margin-top: 60px; margin-bottom: 60px;">
        <h2 style="text-align: center; margin-bottom: 40px;">BACKSTAGE ACCESS - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º</h2>

        <!-- Stats -->
        <div class="torn-edge" style="margin-bottom: 40px;">
            <h3 style="color: var(--cigarette-yellow); margin-bottom: 20px;">–°–¢–ê–¢–ò–°–¢–ò–ö–ê</h3>
            <div class="divider"></div>
            <div style="margin-top: 30px; font-size: 1.1rem; line-height: 2;">
                <p>–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤: <strong id="total-products" style="color: var(--soviet-red);">0</strong></p>
                <p>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <strong id="total-value" style="color: var(--soviet-red);">‚ÇΩ0</strong></p>
                <p>–¢–æ–≤–∞—Ä–æ–≤ —Å LOW stock: <strong id="low-stock" style="color: var(--rust-orange);">0 ‚ö†</strong></p>
            </div>
        </div>

        <div class="divider"></div>

        <!-- Products Table -->
        <h3 class="mt-4 mb-3" style="color: var(--white);">–¢–û–í–ê–†–´ (Setlist)</h3>

        <table class="table-setlist">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–ù–ê–ó–í–ê–ù–ò–ï</th>
                    <th>–¶–ï–ù–ê</th>
                    <th>–û–°–¢–ê–¢–û–ö</th>
                    <th>–ö–ê–¢–ï–ì–û–†–ò–Ø</th>
                    <th>–°–¢–ê–¢–£–°</th>
                </tr>
            </thead>
            <tbody id="products-table-body">
                <tr>
                    <td colspan="6" style="text-align: center; padding: 40px;">–ó–∞–≥—Ä—É–∑–∫–∞...</td>
                </tr>
            </tbody>
        </table>

        <p class="mt-4" style="color: var(--light-grey); text-align: center;">
            –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å CRUD –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è REST API
        </p>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <p class="graffiti" style="font-size: 1.5rem; margin-bottom: 15px;">–¶–û–ô –ñ–ò–í</p>
            <p>&copy; 2025 –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ú–∞–≥–∞–∑–∏–Ω "–ö–ò–ù–û". –í –ø–∞–º—è—Ç—å –æ –í–∏–∫—Ç–æ—Ä–µ –¶–æ–µ –∏ –≥—Ä—É–ø–ø–µ "–ö–∏–Ω–æ".</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script>
      // –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
      document.addEventListener('DOMContentLoaded', async () => {
        try {
          const products = await ShopAPI.getProducts();

          // Stats
          document.getElementById('total-products').textContent = products.length;

          const totalValue = products.reduce((sum, p) => sum + (p.price * p.quantity), 0);
          document.getElementById('total-value').textContent = `‚ÇΩ${totalValue.toLocaleString()}`;

          const lowStock = products.filter(p => p.stockStatus === 'LOW').length;
          document.getElementById('low-stock').textContent = `${lowStock} ‚ö†`;

          // Table
          const tbody = document.getElementById('products-table-body');
          tbody.innerHTML = products.map(p => `
            <tr>
              <td>${p.id}</td>
              <td>${p.name}</td>
              <td>‚ÇΩ${p.price.toLocaleString()}</td>
              <td style="color: ${p.stockStatus === 'LOW' ? 'var(--rust-orange)' : 'inherit'}">
                ${p.quantity} ${p.stockStatus === 'LOW' ? '‚ö†' : ''}
              </td>
              <td style="text-transform: uppercase;">${p.category}</td>
              <td>${p.stockStatus === 'IN_STOCK' ? '–í –ù–ê–õ–ò–ß–ò–ò' : p.stockStatus === 'LOW' ? '–ó–ê–ö–ê–ù–ß–ò–í–ê–ï–¢–°–Ø' : '–ù–ï–¢'}</td>
            </tr>
          `).join('');
        } catch (error) {
          console.error('Error loading admin data:', error);
        }
      });
    </script>
</body>
</html>
